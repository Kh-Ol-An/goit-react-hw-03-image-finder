{"version":3,"sources":["components/Gallery/Gallery.module.css","components/Modal/Modal.module.css","components/PhotoCard/PhotoCard.module.css","components/App.module.css","components/SearchForm/SearchForm.module.css","services/api.js","components/SearchForm/SearchForm.js","components/PhotoCard/PhotoCard.js","components/Gallery/Gallery.js","components/Modal/Modal.js","components/App.js","index.js"],"names":["module","exports","axios","defaults","baseURL","fetchInPixabay","search","page","key","process","query","currentPage","get","SearchForm","onSubmit","onChange","valueInput","className","s","search_form","type","name","value","autoComplete","placeholder","PhotoCard","smallImg","likes","views","comments","downloads","onBtnOpenModalClick","photo_card","src","alt","stats","stats_item","onClick","fullscreen_button","Gallery","items","onBtnLoadMoreClick","gallery","map","item","id","button","Modal","state","onCloseModalPressKey","this","props","window","addEventListener","removeEventListener","onCloseModalClick","largeImg","overlay","modal","Component","INITIAL_STATE","err","showModal","isOpenModal","mapper","datas","webformatURL","largeImageURL","App","handleChange","target","setState","handleSubmit","e","a","preventDefault","reset","fetching","handleLoadMore","handleOpenModal","ps","find","document","querySelector","style","overflow","handleCloseModal","currentTarget","handlePressKey","code","then","data","hits","scrollTo","top","documentElement","scrollHeight","behavior","app","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.cfff24ec.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__3RNHd\",\"button\":\"Gallery_button__3HT1a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo_card\":\"PhotoCard_photo_card__189E0\",\"stats\":\"PhotoCard_stats__3XRLi\",\"stats_item\":\"PhotoCard_stats_item__1clgI\",\"fullscreen_button\":\"PhotoCard_fullscreen_button__1dSBe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1tA9O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search_form\":\"SearchForm_search_form__3vPzB\"};","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchInPixabay = (search, page) => {\n  const key = `?key=${process.env.REACT_APP_PIXABAY_API_KEY}`;\n  const settings = `&image_type=photo&orientation=horizontal`;\n  const query = `&q=${search}`;\n  const perPage = `&per_page=12`;\n  const currentPage = `&page=${page}`;\n  return axios.get(key + settings + query + perPage + currentPage);\n};\n\nexport const a = null;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './SearchForm.module.css';\n\nconst SearchForm = ({ onSubmit, onChange, valueInput }) => {\n  return (\n    <form onSubmit={onSubmit} className={s.search_form}>\n      <input\n        onChange={onChange}\n        type=\"text\"\n        name=\"search\"\n        value={valueInput}\n        autoComplete=\"off\"\n        placeholder=\"Search images...\"\n      />\n    </form>\n  );\n};\n\nSearchForm.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  valueInput: PropTypes.string.isRequired,\n};\n\nexport default SearchForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './PhotoCard.module.css';\n\nconst PhotoCard = ({\n  smallImg,\n  type,\n  likes,\n  views,\n  comments,\n  downloads,\n  onBtnOpenModalClick,\n}) => {\n  return (\n    <>\n      <li className={s.photo_card}>\n        <img src={smallImg} alt={type} />\n\n        <div className={s.stats}>\n          <p className={s.stats_item}>\n            <i className=\"material-icons\">thumb_up</i>\n            {likes}\n          </p>\n          <p className={s.stats_item}>\n            <i className=\"material-icons\">visibility</i>\n            {views}\n          </p>\n          <p className={s.stats_item}>\n            <i className=\"material-icons\">comment</i>\n            {comments}\n          </p>\n          <p className={s.stats_item}>\n            <i className=\"material-icons\">cloud_download</i>\n            {downloads}\n          </p>\n        </div>\n        <button\n          type=\"button\"\n          onClick={onBtnOpenModalClick}\n          className={s.fullscreen_button}\n        >\n          <i className=\"material-icons\">zoom_out_map</i>\n        </button>\n      </li>\n    </>\n  );\n};\n\nPhotoCard.propTypes = {\n  smallImg: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  likes: PropTypes.number.isRequired,\n  views: PropTypes.number.isRequired,\n  comments: PropTypes.number.isRequired,\n  downloads: PropTypes.number.isRequired,\n  onBtnOpenModalClick: PropTypes.func.isRequired,\n};\n\nexport default PhotoCard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Gallery.module.css';\nimport PhotoCard from '../PhotoCard/PhotoCard';\n\nconst Gallery = ({ items, onBtnLoadMoreClick, onBtnOpenModalClick }) => {\n  return (\n    <>\n      <ul className={s.gallery}>\n        {items.map(item => (\n          <PhotoCard\n            key={item.id}\n            id={item.id}\n            smallImg={item.smallImg}\n            type={item.type}\n            likes={item.likes}\n            views={item.views}\n            comments={item.comments}\n            downloads={item.downloads}\n            onBtnOpenModalClick={() => onBtnOpenModalClick(item.id)}\n          />\n        ))}\n      </ul>\n      <button type=\"button\" onClick={onBtnLoadMoreClick} className={s.button}>\n        Load more\n      </button>\n    </>\n  );\n};\n\nGallery.propTypes = {\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }).isRequired,\n  ).isRequired,\n  onBtnLoadMoreClick: PropTypes.func.isRequired,\n  onBtnOpenModalClick: PropTypes.func.isRequired,\n};\n\nexport default Gallery;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nexport default class Modal extends Component {\n  static propTypes = {\n    onCloseModalClick: PropTypes.func.isRequired,\n    onCloseModalPressKey: PropTypes.func.isRequired,\n    largeImg: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n  };\n\n  state = {};\n\n  componentDidMount() {\n    const { onCloseModalPressKey } = this.props;\n    window.addEventListener('keydown', onCloseModalPressKey);\n  }\n\n  componentWillUnmount() {\n    const { onCloseModalPressKey } = this.props;\n    window.removeEventListener('keydown', onCloseModalPressKey);\n  }\n\n  render() {\n    const { onCloseModalClick, largeImg, type } = this.props;\n    return (\n      <div onClick={onCloseModalClick} className={s.overlay}>\n        <div className={s.modal}>\n          <img src={largeImg} alt={type} />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport s from './App.module.css';\nimport { fetchInPixabay } from '../services/api';\nimport SearchForm from './SearchForm/SearchForm';\nimport Gallery from './Gallery/Gallery';\nimport Modal from './Modal/Modal';\n\nconst INITIAL_STATE = {\n  items: [],\n  search: '',\n  page: 1,\n  err: null,\n  showModal: {},\n  isOpenModal: false,\n};\n\nconst mapper = datas => {\n  return datas.map(\n    ({ webformatURL: smallImg, largeImageURL: largeImg, ...props }) => ({\n      smallImg,\n      largeImg,\n      ...props,\n    }),\n  );\n};\n\nexport default class App extends Component {\n  state = { ...INITIAL_STATE };\n\n  componentDidMount() {\n    this.fetching();\n  }\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleSubmit = async e => {\n    e.preventDefault();\n    await this.reset();\n    await this.fetching();\n  };\n\n  handleLoadMore = () => {\n    this.fetching();\n  };\n\n  handleOpenModal = id => {\n    this.setState(ps => ({\n      showModal: ps.items.find(item => item.id === id),\n      isOpenModal: true,\n    }));\n    document.querySelector('body').style.overflow = 'hidden';\n  };\n\n  handleCloseModal = e => {\n    if (e.target !== e.currentTarget) return;\n    this.setState({\n      isOpenModal: false,\n    });\n    document.querySelector('body').style.overflow = 'auto';\n  };\n\n  handlePressKey = ({ code }) => {\n    if (code !== 'Escape') return;\n    this.setState({\n      isOpenModal: false,\n    });\n    document.querySelector('body').style.overflow = 'auto';\n  };\n\n  fetching = async () => {\n    const { search, page } = this.state;\n    try {\n      await fetchInPixabay(search, page).then(({ data }) =>\n        this.setState(ps => ({\n          items: [...ps.items, ...mapper(data.hits)],\n          page: ps.page + 1,\n        })),\n      );\n      await window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    } catch (err) {\n      throw this.setState({ err });\n    }\n  };\n\n  reset = () => {\n    this.setState({\n      items: [],\n      page: 1,\n    });\n  };\n\n  render() {\n    const { items, search, err, showModal, isOpenModal } = this.state;\n    return (\n      <div className={s.app}>\n        <SearchForm\n          onSubmit={this.handleSubmit}\n          onChange={this.handleChange}\n          valueInput={search}\n        />\n        {err ? (\n          <p>Шось пошло не так як треба</p>\n        ) : (\n          <Gallery\n            items={items}\n            onBtnLoadMoreClick={this.handleLoadMore}\n            onBtnOpenModalClick={this.handleOpenModal}\n            isOpenModal={isOpenModal}\n          />\n        )}\n        {isOpenModal && (\n          <Modal\n            onCloseModalClick={isOpenModal && this.handleCloseModal}\n            onCloseModalPressKey={this.handlePressKey}\n            largeImg={showModal.largeImg}\n            type={showModal.type}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}